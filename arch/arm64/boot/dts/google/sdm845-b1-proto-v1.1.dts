/* Copyright (c) 2017, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */


/dts-v1/;

#include "sdm845-b1-common-v2.dtsi"

/ {
	model = "Google Inc. MSM sdm845 B1 proto v1.1 Board";
	compatible = "google,b1c1-sdm845", "qcom,sdm845";
	qcom,board-id = <0x00020405 0>;
};

/* Workaround: Disable front normal camera, which has some MIPI issue. */
&sensor_front {
	status = "disabled";
};

/* B1 P1 has easel spi connected to se11 */
/ {
	aliases {
		spi10 = &qupv3_se11_spi;
	};
};
&qupv3_se0_spi {
	status = "disabled";
};
&qupv3_se11_spi {
	status = "okay";
	mnh-spi@0 {
		compatible = "intel,mnh-spi";
		reg = <0>;
		spi-max-frequency = <25000000>;
		spi-cpol;
		spi-cpha;
	};
	ese@0 {
		status = "disabled";
	};
};

/* Easel is required for camera */
&sensor_front {
	uses-easel;
};
&sensor_front_aux {
	uses-easel;
};
&sensor_rear {
	uses-easel;
};

#include "sdm845-b1c1-haptics-drv2624-overlay.dtsi"

/* B1 P1.1 has the bottom speaker amp in inverted polarity */
&cs35l36_codec1 {
	cirrus,amp-pcm-inv;
	cirrus,imon-pol-inv;
	cirrus,vmon-pol-inv;
};

/* Disable wchg on I2C10 */
&p9221 {
	status = "disabled";
};

&qupv3_se7_spi {
	status = "disable";
};

&qupv3_se8_spi {
	status = "ok";
};

/ {
	aliases {
		spi0 = &qupv3_se8_spi;
	};
};

&cam_sensor_front2_active {
		mux {
			pins = "gpio9", "gpio93";
		};
		config {
			pins = "gpio9", "gpio93";
		};
};

&cam_sensor_front2_suspend {
		mux {
			pins = "gpio9", "gpio93";
		};
		config {
			pins = "gpio9", "gpio93";
		};
};

&eeprom_front {
	pinctrl-0 = <&cam_sensor_mclk1_active
		&cam_sensor_front_active>;
	pinctrl-1 = <&cam_sensor_mclk1_suspend
		&cam_sensor_front_suspend>;
	gpios = <&tlmm 14 0>,
		<&tlmm 21 0>,
		<&tlmm 8 0>;
	clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
};

&eeprom_front_aux {
	gpios = <&tlmm 15 0>,
		<&tlmm 9 0>,
		<&tlmm 93 0>;
};

&sensor_rear {
	csiphy-sd-index = <1>;
};

&sensor_front_aux {
	gpios = <&tlmm 15 0>,
		<&tlmm 9 0>,
		<&tlmm 93 0>;
};

&sensor_front {
	csiphy-sd-index = <0>;
	pinctrl-0 = <&cam_sensor_mclk1_active
			&cam_sensor_front_active>;
	pinctrl-1 = <&cam_sensor_mclk1_suspend
			&cam_sensor_front_suspend>;
	gpios = <&tlmm 14 0>,
		<&tlmm 21 0>,
		<&tlmm 8 0>;
	clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
};

&ctdl_ap_irq {
	mux {
		pins = "gpio96";
	};

	config {
		pins = "gpio96";
	};
};

&ap_ctdl_irq {
	mux {
		pins = "gpio94";
	};

	config {
		pins = "gpio94";
	};
};

&qupv3_se4_spi {
	citadel@0 {
		interrupts = <96 0x0>;
		citadel,ctdl_ap_irq = <&tlmm 96 0x0>;
	};
};
