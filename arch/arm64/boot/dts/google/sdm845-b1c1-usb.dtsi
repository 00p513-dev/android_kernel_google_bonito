
#include <dt-bindings/usb/typec.h>

&vendor {
	extcon_usb1: extcon_usb1 {
		compatible = "linux,extcon-usb-gpio";
		vbus-gpio = <&pmi8998_gpios 8 GPIO_ACTIVE_HIGH>;

		pinctrl-names = "default";
		pinctrl-0 = <&usb2_vbus_det_default>;
	};
};

&ext_5v_boost {
	status = "ok";
};

&usb0 {
	google,switch-vbus = <250>;
};

&tlmm {
	/**
	 * HS enumeration WAR: Add an external pull down resistor (1 K
	 * ~ 1.2 K to USB_DP pin via an external switch controlled by
	 * GPIO104 to enable pull down resistance needed for HS
	 * enumeration.
	 */
	atest_usb13_active: atest_usb13_active {
		mux {
			pins = "gpio104";
			function = "gpio";
		};
		config {
			pins = "gpio104";
			drive-strength = <12>;
			bias-pull-up;
		};
	};
	atest_usb13_suspend: atest_usb13_suspend {
		mux {
			pins = "gpio104";
			function = "gpio";
		};
		config {
			pins = "gpio104";
			bias-pull-down;
			drive-strength = <2>;
		};
	};
};

&qusb_phy0 {
	pinctrl-names = "atest_usb13_suspend", "atest_usb13_active";
	pinctrl-0 = <&atest_usb13_suspend>;
	pinctrl-1 = <&atest_usb13_active>;
};

&pmi8998_pdphy {
	goog,src-pdo = <PDO_TYPE_FIXED 5000 900 0>;	/* 5V @ 0.9A */
	goog,snk-pdo = <PDO_TYPE_FIXED 5000 3000 0>,	/* 5V @ 3A */
		       <PDO_TYPE_FIXED 9000 3000 0>;	/* 9V @ 3A */
	goog,max-snk-mv = <9000>;
	goog,max-snk-ma = <3000>;
	goog,max-snk-mw = <27000>;
	goog,op-snk-mw = <7600>;
	goog,port-type = <TYPEC_PORT_DRP>;
	goog,default-role = <TYPEC_SINK>;
	goog,try-role-hw;
};
